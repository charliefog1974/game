var game=function(){var e=document.getElementById("canvas"),t=e.getContext("2d"),i={x:0,y:475,h:70,w:70,fill:"#7b68ee",dir:"right",speed:5},n={x:50,y:0,h:30,w:30,fill:"#008080",speed:5},r={},l=null,d=null,a=!1,h=0,c=document.getElementById("playerSource"),o=document.getElementById("spawnSource");function y(){t.fillStyle=i.fill,"right"===i.dir?(t.clearRect(i.x-i.speed,i.y-1,i.w+2,i.h+2),t.drawImage(c,i.x=i.x+i.speed,i.y,i.w,i.h),i.x+i.w>=e.width&&(i.dir="left")):(t.clearRect(i.x+i.speed,i.y-1,i.w+2,i.h+2),t.drawImage(c,i.x=i.x-i.speed,i.y,i.w,i.h),i.x<=0&&(i.dir="right")),function(){if(Object.keys(r).length>0)for(let n in r)r[n].y<=e.height?(t.fillStyle=r[n].fill,t.save(),t.clearRect(r[n].x-1,r[n].y-r[n].speed,r[n].w+2,r[n].h+2),t.drawImage(o,r[n].x,r[n].y=r[n].y+r[n].speed,r[n].w,r[n].h),t.restore(),i.x<r[n].x+r[n].w&&r[n].x>i.x&&r[n].x<i.x+i.w&&i.y<r[n].y+r[n].h&&i.y+i.h>r[n].y&&(a=!0,cancelAnimationFrame(d),clearInterval(l))):(h+=100,document.getElementById("score").innerHTML=h,delete r[n])}(),!1===a&&(d=window.requestAnimationFrame(y.bind(d)))}return{changeDirection:function(){"left"===i.dir?i.dir="right":"right"===i.dir&&(i.dir="left")},init:function(){e.height=600,e.width=800,l=setInterval(()=>{for(var t="",i="abcdefghijklmnopqrstuvwxyz",l=0;l<10;l++)t+=i.charAt(Math.floor(Math.random()*i.length));r[t]={x:Math.floor(Math.random()*e.width),y:n.y,h:n.h,w:n.w,fill:n.fill,speed:5}},400),y()}}}();game.init(),window.addEventListener("keyup",function(){game.changeDirection()});